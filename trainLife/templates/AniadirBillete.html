<!DOCTYPE html>
<html lang="es">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viajes - TrainLife</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'styles/AniadirBillete.css' %}">
    <link rel="stylesheet" href="{% static 'styles/sidebar.css' %}">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <a href="#contenido-principal" class="skip-link">Saltar al contenido principal</a>
    <div class="dashboard-container">
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" aria-label="Toggle menu">
            <i data-lucide="menu" aria-hidden="true"></i>
        </button>

        <!-- Sidebar -->
        {% with seccion_actual='viajes' %}
            {% include 'includes/sidebar.html' %}
        {% endwith %}

        <!-- Main Content -->
        <main id="contenido-principal" class="main-content" role="main" aria-labelledby="page-title-main">
            <!-- Breadcrumbs -->
            <nav class="breadcrumbs" aria-label="Ruta de navegación (breadcrumbs)">
                <a href="{% url 'viajes_usuario' usuario.id %}" class="breadcrumb-link">Viajes</a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-current">Añadir Nuevo Billete</span>
            </nav>

            <!-- Título -->
            <div class="page-header">
                <h1 class="page-title" id="page-title-main">
                    <i data-lucide="ticket-plus" aria-hidden="true"></i>
                    Añadir Nuevo Billete
                </h1>
                <p class="page-subtitle">Complete los datos de su billete de tren</p>
            </div>

            <!-- Formulario -->
            <div class="form-container">
                <form method="POST" action="{% url 'aniadir_billete' usuario.id %}" id="billeteForm" aria-label="Formulario de añadir nuevo billete" novalidate>
                    {% csrf_token %}
                    
                    <!-- Mensajes de Error/Éxito -->
                    {% if messages %}
                        {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                        {% endfor %}
                    {% endif %}

                    <!-- Sección: Información del Pasajero -->
                    <div class="form-section">
                        <h2 class="section-title">
                            <i data-lucide="user" aria-hidden="true"></i>
                            Información del Pasajero
                        </h2>
                        <div class="row g-3">
                            <div class="col-12">
                                <label for="nombrePasajero" class="form-label">Nombre Completo del Pasajero 
                                    <span class="required-asterisk" aria-label="campo obligatorio">*</span>
                                </label>
                                <input type="text" class="form-control" id="nombrePasajero" name="nombrePasajero" 
                                       value="{{ usuario.nombreUsuario }} {{ usuario.apellido1 }} {{ usuario.apellido2 }}" required aria-required="true">
                            </div>
                        </div>
                    </div>

                    <!-- Sección: Origen y Destino -->
                    <div class="form-section">
                        <h2 class="section-title">
                            <i data-lucide="map-pin" aria-hidden="true"></i>
                            Origen y Destino
                        </h2>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="origenEstacion" class="form-label">Estación de Origen
                                    <span class="required-asterisk" aria-label="campo obligatorio">*</span>
                                </label>
                                <input type="text" class="form-control" id="origenEstacion" name="origenEstacion" 
                                       placeholder="Ej: Madrid - Puerta de Atocha" required aria-required="true">
                            </div>
                            <div class="col-md-6">
                                <label for="destinoEstacion" class="form-label">Estación de Destino
                                    <span class="required-asterisk" aria-label="campo obligatorio">*</span>
                                </label>
                                <input type="text" class="form-control" id="destinoEstacion" name="destinoEstacion" 
                                       placeholder="Ej: Barcelona - Sants" required aria-required="true">
                            </div>
                            <div class="col-md-6">
                                <label for="andenOrigen" class="form-label">Andén de Origen</label>
                                <input type="text" class="form-control" id="andenOrigen" name="andenOrigen" 
                                       placeholder="Ej: 3" maxlength="10">
                            </div>
                        </div>
                    </div>

                    <!-- Sección: Fecha y Horarios -->
                    <div class="form-section">
                        <h2 class="section-title">
                            <i data-lucide="calendar" aria-hidden="true"></i>
                            Fecha y Horarios
                        </h2>
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label for="fechaViaje" class="form-label">Fecha del Viaje 
                                    <span class="required-asterisk">*</span>
                                </label>
                                <input type="date" class="form-control" id="fechaViaje" name="fechaViaje" required>
                            </div>
                            <div class="col-md-4">
                                <label for="horaSalidaOrigen" class="form-label">Hora de Salida 
                                    <span class="required-asterisk">*</span>
                                </label>
                                <input type="time" class="form-control" id="horaSalidaOrigen" name="horaSalidaOrigen" required>
                            </div>
                            <div class="col-md-4">
                                <label for="horaLlegadaDestino" class="form-label">Hora de Llegada 
                                    <span class="required-asterisk">*</span>
                                </label>
                                <input type="time" class="form-control" id="horaLlegadaDestino" name="horaLlegadaDestino" required>
                            </div>
                        </div>
                    </div>

                    <!-- Sección: Información del Billete -->
                    <div class="form-section">
                        <h2 class="section-title">
                            <i data-lucide="ticket" aria-hidden="true"></i>
                            Información del Billete
                        </h2>
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label for="coche" class="form-label">Coche 
                                    <span class="required-asterisk">*</span>
                                </label>
                                <input type="text" class="form-control" id="coche" name="coche" 
                                       placeholder="Ej: 04" maxlength="10" required>
                            </div>
                            <div class="col-md-4">
                                <label for="asiento" class="form-label">Asiento 
                                    <span class="required-asterisk">*</span>
                                </label>
                                <input type="text" class="form-control" id="asiento" name="asiento" 
                                       placeholder="Ej: 12A" maxlength="10" required>
                            </div>
                            <div class="col-md-4">
                                <label for="clase" class="form-label">Clase 
                                    <span class="required-asterisk">*</span>
                                </label>
                                <select class="form-select" id="clase" name="clase" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="Turista" selected>Turista</option>
                                    <option value="Preferente">Preferente</option>
                                    <option value="Business">Business</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Sección: Opciones Adicionales -->
                    <div class="form-section">
                        <h2 class="section-title">
                            <i data-lucide="settings" aria-hidden="true"></i>
                            Opciones Adicionales
                        </h2>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="estadoViaje" class="form-label">Estado del Viaje</label>
                                <select class="form-select" id="estadoViaje" name="estadoViaje">
                                    <option value="Programado" selected>Programado</option>
                                    <option value="Confirmado">Confirmado</option>
                                    <option value="Retrasado">Retrasado</option>
                                    <option value="En curso">En curso</option>
                                    <option value="Completado">Completado</option>
                                    <option value="Cancelado">Cancelado</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check mt-4 pt-2">
                                    <input class="form-check-input" type="checkbox" id="notificacionesActivas" 
                                           name="notificacionesActivas" checked>
                                    <label class="form-check-label" for="notificacionesActivas">
                                        Activar notificaciones para este viaje
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Botones de Acción -->
                    <div class="form-actions">
                        <a href="{% url 'viajes_usuario' usuario.id %}" class="btn btn-secondary">
                            <i data-lucide="x" aria-hidden="true"></i>
                            Cancelar
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i data-lucide="check" aria-hidden="true"></i>
                            Guardar Billete
                        </button>
                    </div>
                </form>
            </div>
        </main>
    </div>

    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript -->
    <script src="{% static 'js/AniadirBillete.js' %}"></script>
    <script src="{% static 'js/sidebar.js' %}"></script>
</body>
</html>
